[mysql]
datadir = /var/lib/mysql
socket = {{ mysql_socket }}
user = mysql
bind-address = {{ mysql_bind_address }}
port = {{ mysql_port }}

# Performance tuning
key_buffer_size = {{ mysql_key_buffer_size }}
max_allowed_packet = {{ mysql_max_allowed_packet }}
thread_stack = {{ mysql_thread_stack }}
thread_cache_size = {{ mysql_thread_cache_size }}

# InnoDB settings
innodb_buffer_pool_size = {{ innodb_buffer_pool_size }}

# Logging
log_error = {{ mysql_log_error }}

# Replication settings
server-id = {{ mysql_server_id }}
log_bin = /var/log/mysql/mysql-bin.log
max_binlog_size = {{ mysql_max_binlog_size }}

# Version-specific configurations
{% if mysql_version.split('.')[0] | int >= 8 %}
default_authentication_plugin = mysql_native_password
{% endif %}

!includedir /etc/mysql/conf.d/
!includedir /etc/mysql/mysql.conf.d/
